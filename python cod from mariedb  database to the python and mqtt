from flask import Flask, redirect, url_for, render_template
import mariadb, sys
# Connect to MariaDB Platform
print("connecting to DB")
try:
    conn = mariadb.connect(
        user="root",
        password="xxxxxxxxxxxxxxxxxxxxx",
        host="127.0.0.1",
        port=3306,
        database="measurements",
        autocommit=True
    )
except mariadb.Error as e:
    print(f"Error connecting to MariaDB Platform: {e}")
    sys.exit(1)

# Get Cursor
print("get data")
cur = conn.cursor()
#cur.execute("SELECT id, temp,pos FROM temperatures")
cur.execute("SELECT temp FROM temperatures ORDER BY id DESC LIMIT 1;")


result = cur.fetchone()
print(result)

app = Flask(__name__)
app.debug = True


@app.route("/")
def dyna():
  val2 = 4
  val3 = 9
  val4 = 7
  val5 = 2
  return render_template("multipleVal.html", first='one', second=val2, third=val3, fourth=val4, fifth=val5)

app.run(host='0.0.0.0', port=5000)
